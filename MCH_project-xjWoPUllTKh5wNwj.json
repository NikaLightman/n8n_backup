{"createdAt":"2025-07-03T22:30:39.451Z","updatedAt":"2025-07-10T06:39:40.000Z","id":"xjWoPUllTKh5wNwj","name":"MCH_project","active":true,"isArchived":false,"nodes":[{"parameters":{"updates":["message"],"additionalFields":{}},"type":"n8n-nodes-base.telegramTrigger","typeVersion":1.2,"position":[0,0],"id":"02804a73-e4ac-45eb-8455-8a43a2333ea1","name":"Telegram Trigger","webhookId":"20dc4389-a12b-4a3d-b056-e539abab31de","credentials":{"telegramApi":{"id":"aWK6N9U74Dqgx4u2","name":"MCH_bot"}}},{"parameters":{"options":{"systemMessage":"=You are an AI assistant that helps users by finding and analyzing information using an MCP server.\n\nWhen a user asks a question:\n\n1. **Keep the user's question unchanged and in context.**\n\n2. First, call the \"MCP Get list\" operation **only to retrieve the list of available tools**.\n\n3. **Do not output or return the list itself to the user.** Instead, use this list internally to select the most appropriate tool for the user's question.\n\n4. After selecting the best tool, call the \"MCP tool\" node with the **original user question as input** to that tool.\n\n5. Receive the tool's response and analyze it carefully.\n\n6. Generate a clear, concise, and relevant answer **based solely on the tool's response**.\n\n7. If the tool's response is insufficient, inform the user and suggest next steps.\n\n**Important:**  \n- The list of tools is for internal decision-making only and should never be shown to the user.  \n- The final answer must be based on the output of the selected tool, not on the tool list.  \n- Always keep the user's original question intact and pass it to the selected tool.\n\nYour goal is to provide helpful, accurate, and focused answers by leveraging MCP tools, without confusing the user with technical details about tool availability.\n"}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":2,"position":[220,0],"id":"716c5e66-2e75-4bf8-863f-350b46345ccd","name":"AI Agent"},{"parameters":{"model":"openai/gpt-4.1-nano","options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenRouter","typeVersion":1,"position":[140,220],"id":"0132b8ff-4f63-42d3-a399-147c527f164c","name":"OpenRouter Chat Model","credentials":{"openRouterApi":{"id":"4Kzj4qd0jj7PJXLU","name":"MCH_OpenRouter_acc"}}},{"parameters":{"chatId":"={{ $('Telegram Trigger').item.json.message.from.id }}","text":"={{ $json.output }}","additionalFields":{"appendAttribution":false}},"type":"n8n-nodes-base.telegram","typeVersion":1.2,"position":[580,0],"id":"183b84b4-22ae-4bbf-9b41-7ad0ec4acbde","name":"Telegram","webhookId":"2db9a46d-4a3b-423b-b4a2-747eb8129e36","retryOnFail":true,"credentials":{"telegramApi":{"id":"aWK6N9U74Dqgx4u2","name":"MCH_bot"}}},{"parameters":{},"type":"n8n-nodes-mcp.mcpClientTool","typeVersion":1,"position":[340,220],"id":"6279a58e-5fcb-4965-b4d6-0aacee3839b0","name":"MCP Get list","credentials":{"mcpClientApi":{"id":"NUvQ5NXH8GJGzh31","name":"MCH_MCP_account firecrawl"}}},{"parameters":{"operation":"executeTool","toolName":"={{ $fromAI(\"tool\",\"firecrowl tool\") }}","toolParameters":"={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Tool_Parameters', ``, 'json') }}"},"type":"n8n-nodes-mcp.mcpClientTool","typeVersion":1,"position":[480,220],"id":"9e1e3bd7-dfaf-4bba-b23f-9b822363d515","name":"MCP tool","credentials":{"mcpClientApi":{"id":"NUvQ5NXH8GJGzh31","name":"MCH_MCP_account firecrawl"}}}],"connections":{"Telegram Trigger":{"main":[[{"node":"AI Agent","type":"main","index":0}]]},"AI Agent":{"main":[[{"node":"Telegram","type":"main","index":0}]]},"OpenRouter Chat Model":{"ai_languageModel":[[{"node":"AI Agent","type":"ai_languageModel","index":0}]]},"MCP Get list":{"ai_tool":[[{"node":"AI Agent","type":"ai_tool","index":0}]]},"MCP tool":{"ai_tool":[[{"node":"AI Agent","type":"ai_tool","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"b044ad64-8074-4901-8a8a-08f8b4f2a177","triggerCount":1,"tags":[]}